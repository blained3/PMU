"use strict";angular.module("testApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase"]).config(["$routeProvider",function(a){a.when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).when("/status",{templateUrl:"views/status.html",controller:"StatusCtrl",controllerAs:"status"}).when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/info",{templateUrl:"views/info.html",controller:"InfoCtrl",controllerAs:"info"}).otherwise({redirectTo:"/"})}]).controller("TopCtrl",["$location","$scope",function(a,b){b.isActive=function(b){return b===a.path()}}]).service("LoginService",function(){function a(){return c}function b(){c=!0}var c=!1;return{isLoggedIn:a,logIn:b}}).service("IDService",function(){function a(){return c}function b(a){c=a}var c="";return{getID:a,setID:b}});var config={apiKey:"AIzaSyASk9sXM9NW_lNAd_0-rvI13j6OEjU7IGw",databaseURL:"https://newlegogroup.firebaseio.com/"};firebase.initializeApp(config),angular.module("testApp").controller("LoginCtrl",["$scope","$location","LoginService",function(a,b,c){a.goBack=function(){c.logIn(),b.path("/profile")}}]),angular.module("testApp").controller("ProfileCtrl",["$scope","LoginService","$location","$firebaseArray","IDService",function(a,b,c,d,e){b.isLoggedIn()||c.path("/login"),a.goToStatusPage=function(a){e.setID(a.$id),c.path("/status")};var f=firebase.database().ref(),g=f.child("testUser"),h=!1;a.ridesLoaded=function(){return h},a.rides=d(g),a.rides.$loaded(function(a){h=!0}),a.futureRides=function(){var b=[];if(h)for(var c=Date.now(),d=0;d<a.rides.length;d++){var e=a.rides[d],f=Date.parse(e.time);f>c&&b.push(e)}return b}}]),angular.module("testApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("testApp").controller("InfoCtrl",["$scope","$firebaseArray","$location","IDService",function(a,b,c,d){var e=firebase.database().ref(),f=e.child("testUser");a.rides=b(f),a.saveRide=function(b,e,f,g,h){if(b&&e&&f&&g&&h){var i=new Date(Date.now());f.setFullYear(i.getFullYear()),f.setMonth(i.getMonth()),f.setDate(i.getDate());var j={start:{lat:b.lat(),lng:b.lng()},end:{lat:e.lat(),lng:e.lng()},time:f.toJSON(),pay:g,name:h};a.rides.$add(j).then(function(b){var e=a.rides[a.rides.length-1].$id;d.setID(e),c.path("/status")})}};var g=new google.maps.LatLng(40.23,(-111.65));a.start=g;var h={center:g,zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(document.getElementById("map"),h),this.markerStart=new google.maps.Marker({position:a.start,map:this.map,draggable:!0,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}),a.end=new google.maps.LatLng(40.24,(-111.64)),this.markerEnd=new google.maps.Marker({position:a.end,map:this.map,draggable:!0,icon:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"});var i=new google.maps.InfoWindow({content:'<span class="info-window">Start</span>'}),j=new google.maps.InfoWindow({content:'<span class="info-window">End</span>'});i.open(this.map,this.markerStart),j.open(this.map,this.markerEnd),google.maps.event.addListener(this.markerStart,"dragend",function(b){console.log(b.latLng.lat());var c=b.latLng.lat(),d=b.latLng.lng();a.start=new google.maps.LatLng(c,d)}),google.maps.event.addListener(this.markerEnd,"dragend",function(b){console.log(b.latLng.lat());var c=b.latLng.lat(),d=b.latLng.lng();a.end=new google.maps.LatLng(c,d)})}]),angular.module("testApp").controller("StatusCtrl",["$scope","$location","IDService","$firebaseObject",function(a,b,c,d){var e=c.getID(),f=firebase.database().ref(),g=f.child("testUser");a.ride={},""!==e&&(g=g.child(e),a.ride=d(g))}]),angular.module("testApp").run(["$templateCache",function(a){a.put("views/info.html",'<form> <div id="map" data-tap-disabled="true"></div> <div class="form-wrapper"> <label>Ride Name: <input class="form-box" type="text" ng-model="name"></label> <br> <label>Time: <input class="form-box" type="time" ng-model="time"></label> <br> <label>Willing to Pay: $ <input class="form-box" type="number" ng-model="pay"></label> </div> </form> <p><a class="btn btn-lg btn-success" ng-click="saveRide(start,end,time,pay,name)">Get A Ride!</a></p> <div class="breathing-room"> </div>'),a.put("views/login.html",'<div id="login-component"> <input class="form-box" type="email" ng-model="email" placeholder="Email"><br><br> <input class="form-box" type="password" ng-model="password" placeholder="Password"><br><br> <button class="btn btn-lg btn-success" ng-click="goBack()">Login</button> </div>'),a.put("views/main.html",'<div class="jumbotron"> <p class="lead"> Get your Automated Vehicle Now!<br><br> <a ng-href="#/info"> <img height="fix" width="255" src="images/pmu.000a98a1.png" alt="Pick Me Up" class="title-button"> </a></p> </div>'),a.put("views/profile.html",'<div id="profile-component"> <p>Wallet Amount: $12.00</p><br> <button class="btn btn-lg btn-success">Add Funds</button> <h1>Rides</h1> <div class="container-fluid"> <div ng-repeat="ride in futureRides()" class="row" ng-click="goToStatusPage(ride)"> <button class="btn btn-xs btn-success col-xs-1">X</button> <p class="col-xs-6">{{ride.name}}</p> <p class="col-xs-5">Cost: ${{ride.pay}}</p> </div> </div> </div>'),a.put("views/status.html",'<h1>Details: {{ride.name}}</h1> <div class="row"> <p class="col-xs-6">Leaving From:</p> <p class="col-xs-6">start</p> </div> <div class="row"> <p class="col-xs-6">Going To:</p> <p class="col-xs-6">end</p> </div> <div class="row"> <p class="col-xs-6">At:</p> <p class="col-xs-6">{{ride.time | date: \'h:mm a\'}}</p> </div> <div class="row"> <p class="col-xs-6">Cost:</p> <p class="col-xs-6">${{ride.pay}}</p> </div> <p><a class="btn btn-lg btn-success" ng-href="#/">Back to Home!</a></p>')}]);